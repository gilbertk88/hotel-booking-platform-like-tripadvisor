a:2:{i:0;s:17360:"1406623536|(function($){$.extend({metadata:{defaults:{type:'class',name:'metadata',cre:/({.*})/,single:'metadata'},setType:function(type,name){this.defaults.type=type;this.defaults.name=name;},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);if(!settings.single.length)settings.single='metadata';var data=$.data(elem,settings.single);if(data)return data;data="{}";var getData=function(data){if(typeof data!="string")return data;if(data.indexOf('{')<0){data=eval("("+data+")");}};var getObject=function(data){if(typeof data!="string")return data;data=eval("("+data+")");return data;};if(settings.type=="html5"){var object={};$(elem.attributes).each(function(){var name=this.nodeName;if(name.match(/^data-/))name=name.replace(/^data-/,'');else return true;object[name]=getObject(this.nodeValue);});}else{if(settings.type=="class"){var m=settings.cre.exec(elem.className);if(m)
data=m[1];}else if(settings.type=="elem"){if(!elem.getElementsByTagName)return;var e=elem.getElementsByTagName(settings.name);if(e.length)
data=$.trim(e[0].innerHTML);}else if(elem.getAttribute!=undefined){var attr=elem.getAttribute(settings.name);if(attr)
data=attr;}
object=getObject(data.indexOf("{")<0?"{"+data+"}":data);}
$.data(elem,settings.single,object);return object;}}});$.fn.metadata=function(opts){return $.metadata.get(this[0],opts);};})(jQuery);;;if(window.jQuery)(function($){if((!$.support.opacity&&!$.support.style))try{document.execCommand("BackgroundImageCache",false,true)}catch(e){};$.fn.rating=function(options){if(this.length==0)return this;if(typeof arguments[0]=='string'){if(this.length>1){var args=arguments;return this.each(function(){$.fn.rating.apply($(this),args);});};$.fn.rating[arguments[0]].apply(this,$.makeArray(arguments).slice(1)||[]);return this;};var options=$.extend({},$.fn.rating.options,options||{});$.fn.rating.calls++;this.not('.star-rating-applied').addClass('star-rating-applied').each(function(){var control,input=$(this);var eid=(this.name||'unnamed-rating').replace(/\[|\]/g,'_').replace(/^\_+|\_+$/g,'');var context=$(this.form||document.body);var raters=context.data('rating');if(!raters||raters.call!=$.fn.rating.calls)raters={count:0,call:$.fn.rating.calls};var rater=raters[eid]||context.data('rating'+eid);if(rater)control=rater.data('rating');if(rater&&control)
control.count++;else{control=$.extend({},options||{},($.metadata?input.metadata():($.meta?input.data():null))||{},{count:0,stars:[],inputs:[]});control.serial=raters.count++;rater=$('<span class="star-rating-control"/>');input.before(rater);rater.addClass('rating-to-be-drawn');if(input.attr('disabled')||input.hasClass('disabled'))control.readOnly=true;if(input.hasClass('required'))control.required=true;rater.append(control.cancel=$('<div class="rating-cancel"><a title="'+control.cancel+'">'+control.cancelValue+'</a></div>').on('mouseover',function(){$(this).rating('drain');$(this).addClass('star-rating-hover');}).on('mouseout',function(){$(this).rating('draw');$(this).removeClass('star-rating-hover');}).on('click',function(){$(this).rating('select');}).data('rating',control));};var star=$('<div role="text" aria-label="'+this.title+'" class="star-rating rater-'+control.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+'</a></div>');rater.append(star);if(this.id)star.attr('id',this.id);if(this.className)star.addClass(this.className);if(control.half)control.split=2;if(typeof control.split=='number'&&control.split>0){var stw=($.fn.width?star.width():0)||control.starWidth;var spi=(control.count%control.split),spw=Math.floor(stw/control.split);star.width(spw).find('a').css({'margin-left':'-'+(spi*spw)+'px'})};if(control.readOnly)
star.addClass('star-rating-readonly');else
star.addClass('star-rating-live').on('mouseover',function(){$(this).rating('fill');$(this).rating('focus');}).on('mouseout',function(){$(this).rating('draw');$(this).rating('blur');}).on('click',function(){$(this).rating('select');});if(this.checked)control.current=star;if(this.nodeName=="A"){if($(this).hasClass('selected'))
control.current=star;};input.hide();input.on('change.rating',function(event){if(event.selfTriggered)return false;$(this).rating('select');});star.data('rating.input',input.data('rating.star',star));control.stars[control.stars.length]=star[0];control.inputs[control.inputs.length]=input[0];control.rater=raters[eid]=rater;control.context=context;input.data('rating',control);rater.data('rating',control);star.data('rating',control);context.data('rating',raters);context.data('rating'+eid,rater);});$('.rating-to-be-drawn').rating('draw').removeClass('rating-to-be-drawn');return this;};$.extend($.fn.rating,{calls:0,focus:function(){var control=this.data('rating');if(!control)return this;if(!control.focus)return this;var input=$(this).data('rating.input')||$(this.tagName=='INPUT'?this:null);if(control.focus)control.focus.apply(input[0],[input.val(),$('a',input.data('rating.star'))[0]]);},blur:function(){var control=this.data('rating');if(!control)return this;if(!control.blur)return this;var input=$(this).data('rating.input')||$(this.tagName=='INPUT'?this:null);if(control.blur)control.blur.apply(input[0],[input.val(),$('a',input.data('rating.star'))[0]]);},fill:function(){var control=this.data('rating');if(!control)return this;if(control.readOnly)return;this.rating('drain');this.prevAll().addBack().filter('.rater-'+control.serial).addClass('star-rating-hover');},drain:function(){var control=this.data('rating');if(!control)return this;if(control.readOnly)return;control.rater.children().filter('.rater-'+control.serial).removeClass('star-rating-on').removeClass('star-rating-hover');},draw:function(){var control=this.data('rating');if(!control)return this;this.rating('drain');var current=$(control.current);var starson=current.length?current.prevAll().addBack().filter('.rater-'+control.serial):null;if(starson)starson.addClass('star-rating-on');control.cancel[control.readOnly||control.required?'hide':'show']();this.siblings()[control.readOnly?'addClass':'removeClass']('star-rating-readonly');},select:function(value,wantCallBack){var control=this.data('rating');if(!control)return this;if(control.readOnly)return;control.current=null;if(typeof value!='undefined'||this.length>1){if(typeof value=='number')
return $(control.stars[value]).rating('select',undefined,wantCallBack);if(typeof value=='string'){$.each(control.stars,function(){if($(this).data('rating.input').val()==value)$(this).rating('select',undefined,wantCallBack);});return this;};}
else{control.current=this[0].tagName=='INPUT'?this.data('rating.star'):(this.is('.rater-'+control.serial)?this:null);};this.data('rating',control);this.rating('draw');var current=$(control.current?control.current.data('rating.input'):null);var lastipt=$(control.inputs).filter(':checked');var deadipt=$(control.inputs).not(current);deadipt.prop('checked',false);current.prop('checked',true);$(current.length?current:lastipt).trigger({type:'change',selfTriggered:true});if((wantCallBack||wantCallBack==undefined)&&control.callback)control.callback.apply(current[0],[current.val(),$('a',control.current)[0]]);return this;},readOnly:function(toggle,disable){var control=this.data('rating');if(!control)return this;control.readOnly=toggle||toggle==undefined?true:false;if(disable)$(control.inputs).attr("disabled","disabled");else $(control.inputs).removeAttr("disabled");this.data('rating',control);this.rating('draw');},disable:function(){this.rating('readOnly',true,true);},enable:function(){this.rating('readOnly',false,false);}});$.fn.rating.options={cancel:'Cancel Rating',cancelValue:'',split:0,starWidth:16};$(function(){$('input[type=radio].star').rating();});})(jQuery);;var sliderRangeFields=[{'field':'price','params':{'field':'price','min':35647,'max':35647,'min_sel':35647,'max_sel':35647,'step':1,'measure_unit':'KES','class':'price-search-select'}},{'field':'floor','params':{'field':'floor','min':0,'max':30,'min_sel':0,'max_sel':30,'step':1,'class':'floor-search-select'}}];var cityField={'minWidth':'290'};var loc=0;var countFiled=8;var isInner=1;var heightField=38;var advancedIsOpen=0;var compact=1;var minHeight=isInner?80:260;var searchCache=[];var objType=0;var useSearchCache=false;var search={init:function(){if(sliderRangeFields){$.each(sliderRangeFields,function(){search.initSliderRange(this.params);});}
if(cityField){$("#city").multiselect({noneSelectedText:"Select a city/cities",checkAllText:"Ð¡heck all",uncheckAllText:"Uncheck all",selectedText:"# of # available",minWidth:cityField.minWidth,classes:"search-input-new search-city-height",multiple:"false",selectedList:1}).multiselectfilter({label:"Quick search",placeholder:"Enter initial letters",width:185});}
if(countFiled<=6){if(advancedIsOpen){if(isInner){search.innerSetAdvanced();}else{search.indexSetNormal();$('#more-options-link').hide();}}else if(!isInner){$('#more-options-link').hide();}}else{if(!isInner){$('#more-options-link').show();}
if(advancedIsOpen){if(isInner){search.innerSetAdvanced();}else{search.indexSetAdvanced();}}}},initSliderRange:function(sliderParams){$("#slider-range-"+sliderParams.field).slider({range:true,min:sliderParams.min,max:sliderParams.max,values:[sliderParams.min_sel,sliderParams.max_sel],step:sliderParams.step,slide:function(e,ui){$("#"+sliderParams.field+"_min_val").html(ui.values[0]);$("#"+sliderParams.field+"_min").val(ui.values[0]);$("#"+sliderParams.field+"_max_val").html(ui.values[1]);$("#"+sliderParams.field+"_max").val(ui.values[1]);},stop:function(e,ui){changeSearch();}});},indexSetNormal:function(){$("#homeintro").animate({"height":"270"});$("div.index-header-form").animate({"height":"234"});$("div.searchform-index").animate({"height":"267"});$("#more-options-link").html("More options");advancedIsOpen=0;},indexSetAdvanced:function(){var height=search.getHeight();$("#homeintro").animate({"height":height+10});$("div.index-header-form").animate({"height":height});$("div.searchform-index").animate({"height":height+10});$("#more-options-link").html("Less options");advancedIsOpen=1;},innerSetNormal:function(){$("#searchform-block").addClass("compact");$("#search-more-fields").hide();$("#more-options-link-inner").show();$("#more-options-img").hide();advancedIsOpen=0;},innerSetAdvanced:function(){var height=search.getHeight();$("#searchform-block").removeClass("compact").animate({"height":height+20});$("#search_form").animate({"height":height});$("#btnleft").removeClass("btnsrch-compact");$("#search-more-fields").show();$("#more-options-link-inner").hide();$("#more-options-img").show();advancedIsOpen=1;},getHeight:function(){var height=countFiled*heightField+30;if(height<minHeight){return minHeight;}
return isInner?height/2+20:height;},renderForm:function(obj_type_id){$('#search_form').html(searchCache[obj_type_id].html);sliderRangeFields=searchCache[obj_type_id].sliderRangeFields;cityField=searchCache[obj_type_id].cityField;countFiled=searchCache[obj_type_id].countFiled+(loc?2:0);search.init();if(!useSearchCache){delete(searchCache[obj_type_id]);}
changeSearch();}}
$(function(){search.init();$('#objType').live('change',function(){var obj_type_id=$(this).val();if(typeof searchCache[obj_type_id]=='undefined'){$.ajax({url:BASE_URL+'/quicksearch/main/loadForm?'+$('#search-form').serialize(),dataType:'json',type:'GET',data:{obj_type_id:obj_type_id,is_inner:1,compact:advancedIsOpen?0:1},success:function(data){if(data.status=='ok'){searchCache[obj_type_id]=[];searchCache[obj_type_id].html=data.html;searchCache[obj_type_id].sliderRangeFields=data.sliderRangeFields;searchCache[obj_type_id].cityField=data.cityField;searchCache[obj_type_id].countFiled=data.countFiled;search.renderForm(obj_type_id);}}})}else{search.renderForm(obj_type_id);}});if(isInner){$("#more-options-link-inner, #more-options-img").live('click',function(){if(advancedIsOpen){search.innerSetNormal();}else{search.innerSetAdvanced();}});}else{$("#more-options-link").live('click',function(){if(advancedIsOpen){search.indexSetNormal();}else{search.indexSetAdvanced();}});}
if(isInner&&!compact){search.innerSetAdvanced();}});;$(function(){$("ul.dropdown li").hover(function(){$(this).addClass("hover");$('ul:first',this).css('visibility','visible');},function(){$(this).removeClass("hover");$('ul:first',this).css('visibility','hidden');});$("ul.dropdown li ul li:has(ul)").find("a:first").append(" &raquo; ");$("ul.dropDownNav li").hover(function(){$(this).addClass("hover");$('ul:first',this).css('visibility','visible');},function(){$(this).removeClass("hover");$('ul:first',this).css('visibility','hidden');});$("ul.dropDownNav li ul li:has(ul)").find("a:first").append(" &raquo; ");});;jQuery(function($){$("#loading").bind("ajaxSend",function(){$(this).show();}).bind("ajaxComplete",function(){$(this).hide();});$('.searchField').live('change',function(event){changeSearch();});});function focusSubmit(elem){elem.keypress(function(e){if(e.which==13){$(this).blur();$("#btnleft").focus().click();}});}
function reloadApartmentList(url){$.ajax({type:'GET',url:url,data:{is_ajax:1},ajaxStart:UpdatingProcess(resultBlock,updateText),success:function(msg){$('div.main-content-wrapper').html(msg);$('div.ratingview > span > input').rating({'readOnly':true});list.apply();var dest=0;if($("#appartment_box").offset().top>$(document).height()-$(window).height()){dest=$(document).height()-$(window).height();}else{dest=$("#appartment_box").offset().top;}
$("html,body").animate({scrollTop:dest},500,"swing");$('#update_div').remove();$('#update_text').remove();$('#update_img').remove();}});}
function UpdatingProcess(resultBlock,updateText){$('#update_div').remove();$('#update_text').remove();$('#update_img').remove();var opacityBlock=$('#'+resultBlock);if(opacityBlock.width()!=null){var width=opacityBlock.width();var height=opacityBlock.height();var left_pos=opacityBlock.offset().left;var top_pos=opacityBlock.offset().top;$('body').append('<div id=\"update_div\"></div>');var cssValues={'z-index':'5','position':'absolute','left':left_pos,'top':top_pos,'width':width,'height':height,'border':'0px solid #FFFFFF','background-image':'url('+bg_img+')'}
$('#update_div').css(cssValues);var left_img=left_pos+width/2-16;var left_text=left_pos+width/2+24;var top_img=top_pos+height/2-16;var top_text=top_img+8;$('body').append("<img id='update_img' src='"+indicator+"' style='position:absolute;z-index:6; left: "+left_img+"px;top: "+top_img+"px;'>");$('body').append("<div id='update_text' style='position:absolute;z-index:6; left: "+left_text+"px;top: "+top_text+"px;'>"+updateText+"</div>");}}
var searchLock=false;function changeSearch(){if(params.change_search_ajax!=1){return false;}
if(!searchLock){searchLock=true;$.ajax({url:BASE_URL+'/quicksearch/main/mainsearch/countAjax/1',data:$('#search-form').serialize(),dataType:'json',type:'get',success:function(data){$('#btnleft').html(data.string);searchLock=false;},error:function(){searchLock=false;}})}}
var placemarksYmap=[];var list={lat:0,lng:0,apply:function(){$('div.appartment_item').each(function(){var existListMap=$('#list_map_block').attr('exist')==1;if(!existListMap){return;}
var item=$(this);item.mouseover(function(){var ad=$(this);var lat=ad.attr('lat')+0;var lng=ad.attr('lng')+0;var id=ad.attr('ap_id');if((list.lat!=lat||list.lng!=lng)&&lat>0&&lng>0){list.lat=lat;list.lng=lng;if(useGoogleMap){if(typeof infoWindowsGMap!=='undefined'&&typeof infoWindowsGMap[id]!=='undefined'){for(var key in infoWindowsGMap){if(key==id){infoWindowsGMap[key].open();}else{infoWindowsGMap[key].close();}}
var latLng=new google.maps.LatLng(lat,lng);mapGMap.panTo(latLng);infoWindowsGMap[id].open(mapGMap,markersGMap[id]);}}
if(useYandexMap){if(typeof placemarksYMap[id]!=='undefined'){placemarksYMap[id].balloon.open();}}}});});}};var BASE_URL='/hotel';var params={change_search_ajax:1};$(document).on("click","a.compare-label",function(){apId=$(this).attr("id");apId=apId.replace("compare_label","");if($(this).attr("data-rel-compare")=="false"){if(apId){var checkboxCompare=$("#compare_check"+apId);if(checkboxCompare.is(":checked"))
checkboxCompare.prop("checked",false);else{checkboxCompare.prop("checked",true);}
addCompare(apId);}}});$(document).on("change",".compare-check",function(){apId=$(this).attr("id");apId=apId.replace("compare_check","");addCompare(apId);});function addCompare(apId){apId=apId||0;if(apId){var controlCheckedCompare=$("#compare_check"+apId).prop("checked");if(!controlCheckedCompare){deleteCompare(apId);}
else{$.ajax({type:"POST",url:"/hotel/comparisonList/main/add",data:{apId:apId},beforeSend:function(){},success:function(html){if(html=="ok"){$("#compare_label"+apId).html("In the comparison list");$("#compare_label"+apId).prop("href","/hotel/comparisonList");$("#compare_label"+apId).attr("data-rel-compare","true");}
else{$("#compare_check"+apId).prop("checked",false);if(html=="max_limit"){$("#compare_label"+apId).html("Maximum 6 listings");}
else{$("#compare_label"+apId).html("Error");}}}});}}}
function deleteCompare(apId){$.ajax({type:"POST",url:"/hotel/comparisonList/main/del",data:{apId:apId},success:function(html){if(html=="ok"){$("#compare_label"+apId).html("Add to a comparison list ");$("#compare_label"+apId).prop("href","javascript:void(0);");$("#compare_label"+apId).attr("data-rel-compare","false");}
else{$("#compare_check"+apId).prop("checked",true);$("#compare_label"+apId).html("Error");}}});}";i:1;N;}